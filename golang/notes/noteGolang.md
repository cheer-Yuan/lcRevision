## 协程和线程

### 协程

协程（coroutine）是一种程序运行的方式，即在单线程里多个函数并发地执行.

创建不调用操作系统的资源

轻量化，适合io密集型任务

###

由于协程的特性, 适合执行大量的I/O 密集型任务, 而线程在这方面弱于协程

协程涉及到函数的切换, 多线程涉及到线程的切换, 所以都有执行上下文, 但是协程不是被操作系统内核所管理, 而完全是由程序所控制（也就是在用户态执行）, 这样带来的好处就是性能得到了很大的提升, 不会像线程那样需要在内核态进行上下文切换来消耗资源，因此协程的开销远远小于线程的开销

同一时间, 在多核处理器的环境下, 多个线程是可以并行的，但是运行的协程的函数却只能有一个，其他的协程的函数都被suspend, 即协程是并发的

由于协程在同一个线程中, 所以不需要用来守卫临界区段的同步性原语（primitive）比如互斥锁、信号量等，并且不需要来自操作系统的支持

在协程之间的切换不需要涉及任何系统调用或任何阻塞调用

通常的线程是抢先式(即由操作系统分配执行权), 而协程是由程序分配执行权